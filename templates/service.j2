[Unit]
Description={{ program.description }}
Wants={{ systemd.target }}
After={{ systemd.target }}

[Service]
{% if program["timer"] is defined and (program["timer"] | length > 0) %}
Type=oneshot
{% else %}
Type=simple
Restart=on-failure
RestartSec=3
{% endif %}
{% if program["environment"] is defined and (program["environment"] | length > 0) %}
EnvironmentFile={{ environment_file_path }}
{% endif %}
ExecStart={{ program_location }} {{ program.parameters | default([]) | map('quote') | join(" ") | replace("%", "%%") }}

[Install]
WantedBy={{ systemd.target }}
